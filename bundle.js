(()=>{var e={476:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};function n(e,t,n){if(n||2===arguments.length)for(var o,r=0,a=t.length;r<a;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function o(e,n){var o,r,a=(o={current:0,next:function(){return++this.current}},r={},{add:function(e,t){var n=null!=t?t:o.next();return r[n]=e,n},resolve:function(e,t,n){var o=r[e];o&&(n(t)?o.resolve(t):o.reject(t),r[e]=null)}});return n((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,n=t.request_id,o=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(t,["request_id"]);n&&a.resolve(n,o,(function(e){return!("error_type"in e)}))}})),function(n,o){return void 0===o&&(o={}),new Promise((function(r,i){var s=a.add({resolve:r,reject:i},o.request_id);e(n,t(t({},o),{request_id:s}))}))}}var r,a,i,s,p,l,d,c="undefined"!=typeof window,u=Boolean(c&&window.AndroidBridge),b=Boolean(c&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),y=Boolean(c&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),m=c&&!u&&!b,f=m&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),g=m?"message":"VKWebAppEvent",h=n(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate"],m&&!f?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppGetFriends","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"],!0),v=c?window.AndroidBridge:void 0,A=b?window.webkit.messageHandlers:void 0,w=m?parent:void 0;e.EAdsFormats=void 0,(r=e.EAdsFormats||(e.EAdsFormats={})).REWARD="reward",r.INTERSTITIAL="interstitial",e.BannerAdLayoutType=void 0,(a=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE="resize",a.OVERLAY="overlay",e.BannerAdLocation=void 0,(i=e.BannerAdLocation||(e.BannerAdLocation={})).TOP="top",i.BOTTOM="bottom",e.EGrantedPermission=void 0,(s=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA="camera",s.LOCATION="location",s.PHOTO="photo",e.EGetLaunchParamsResponseLanguages=void 0,(p=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU="ru",p.UK="uk",p.UA="ua",p.EN="en",p.BE="be",p.KZ="kz",p.PT="pt",p.ES="es",e.EGetLaunchParamsResponseGroupRole=void 0,(l=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN="admin",l.EDITOR="editor",l.MEMBER="member",l.MODER="moder",l.NONE="none",e.EGetLaunchParamsResponsePlatforms=void 0,(d=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB="desktop_web",d.DESKTOP_WEB_MESSENGER="desktop_web_messenger",d.DESKTOP_APP_MESSENGER="desktop_app_messenger",d.MOBILE_WEB="mobile_web",d.MOBILE_ANDROID="mobile_android",d.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",d.MOBILE_IPHONE="mobile_iphone",d.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",d.MOBILE_IPAD="mobile_ipad";var E=function(e){var t=void 0,r=[];function a(e){r.push(e)}function i(){return b||u}function s(){return m&&window.parent!==window}function p(){return i()||s()}function l(e){if(b||u)return n([],r,!0).map((function(t){return t.call(null,e)}));var o=null==e?void 0:e.data;if(m&&o){if(y&&"string"==typeof o)try{o=JSON.parse(o)}catch(e){}var a=o.type,i=o.data,s=o.frameId;a&&("VKWebAppSettings"!==a?n([],r,!0).map((function(e){return e({detail:{type:a,data:i}})})):t=s)}}y&&/(android)/i.test(navigator.userAgent)?document.addEventListener(g,l):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(g,l);var d=o((function(e,n){v&&v[e]?v[e](JSON.stringify(n)):A&&A[e]&&"function"==typeof A[e].postMessage?A[e].postMessage(n):y?window.ReactNativeWebView.postMessage(JSON.stringify({handler:e,params:n})):w&&"function"==typeof w.postMessage&&w.postMessage({handler:e,params:n,type:"vk-connect",webFrameId:t,connectVersion:"2.10.0"},"*")}),a);return{send:d,sendPromise:d,subscribe:a,unsubscribe:function(e){var t=r.indexOf(e);t>-1&&r.splice(t,1)},supports:function(e){return u?!(!v||"function"!=typeof v[e]):b?!(!A||!A[e]||"function"!=typeof A[e].postMessage):!!m&&h.includes(e)},isWebView:i,isIframe:s,isEmbedded:p,isStandalone:function(){return!p()}}}();e.applyMiddleware=function e(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.includes(void 0)||n.includes(null)?e.apply(void 0,n.filter((function(e){return"function"==typeof e}))):function(e){if(0===n.length)return e;var o,r={subscribe:e.subscribe,send:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.send.apply(e,t)}},a=n.filter((function(e){return"function"==typeof e})).map((function(e){return e(r)})).reduce((function(e,t){return function(n){return e(t(n))}}));return o=a(e.send),t(t({},e),{send:o})}},e.default=E,e.parseURLSearchParamsForGetLaunchParams=function(t){var n={};try{new URLSearchParams(t).forEach((function(t,o){switch(o){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":n[o]=Number(t);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":n[o]=t;break;case"odr_enabled":n.odr_enabled="1"===t?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":n[o]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(t);break;case"vk_language":n.vk_language=function(t){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_viewer_group_role":n.vk_viewer_group_role=function(t){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_platform":n.vk_platform=function(t){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===t}))}(t)?t:void 0}}))}catch(e){console.warn(e)}return n},Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(476),t=n.n(e);t().send("VKWebAppInit",{});var o=["#d22","#3d3","blue","#aaa","yellow","purple"],r=new Date,a=[1],i="",s=25,p=1,l=parseInt(15),d=l*l,c=0,u=1,b=0;function y(e){if(u){const t=document.elementFromPoint(e.x,e.y);i=t.style.background,function(){for(var e=0;e<a.length;e++)document.getElementById(a[e]).style.background=i}(),h(),(a.length>=d||p>=s)&&(u=0,c=p>=s?0:1,0==b?function(){const e=document.createElement("div");e.id="resultBar",e.style.position="absolute",e.style.width="auto",e.style.height="auto",e.style.marginLeft="320px",e.style.fontSize="2em",e.style.marginTop="280px",e.style.padding="20px",e.style.border="3px solid black",e.style.fontFamily="Open Sans",e.innerText=c?"Получилось! Еще раз?\n":"Не вышло... Пробуем ещё?\n",e.style.background="white";const t=document.createElement("div");t.id="yesBtn",t.style.position="relative",t.innerText="Да",t.style.marginTop="10px",t.style.background="#3c3",t.style.width="auto",t.style.display="inline-block",t.style.height="auto",t.style.marginLeft="10%",t.style.padding="5px 20px",t.onmouseover=m,t.onmouseout=f,t.onclick=g,t.style.border="2px solid black",e.appendChild(t);const n=document.createElement("div");n.id="sureBtn",n.style.display="inline-block",n.style.position="relative",n.innerText="Конечно!",n.style.background="#77c",n.style.width="auto",n.style.height="auto",n.style.float="right",n.style.marginRight="10%",n.style.marginTop="10px",n.onmouseover=m,n.onmouseout=f,n.style.border="2px solid black",n.style.padding="5px 10px",n.onclick=g,e.appendChild(n),document.getElementById("window").appendChild(e)}():document.getElementById("resultBar").style.display="block"),p+=1,u&&A()}}function m(e){const t=document.elementFromPoint(e.x,e.y);t.style.cursor="pointer",t.style.background="black",t.style.color="white"}function f(){const e=document.getElementById("yesBtn");e.style.cursor="default";const t=document.getElementById("sureBtn");t.style.cursor="default",e.style.background="#3c3",e.style.color="black",t.style.background="#77c",t.style.color="black"}function g(e){document.elementFromPoint(e.x,e.y).style.cursor="default",document.getElementById("resultBar").style.display="none",(b+=1)%2==0&&(t().send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((e=>{e.result||console.log("Рекламные материалы не найдены.")})).catch((e=>{console.log(e)})),t().send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((e=>{e.result?console.log("Реклама показана"):console.log("Ошибка при показе")})).catch((e=>{console.log(e)}))),function(){r=new Date;for(var e=0;e<d;e++)document.getElementById(e+1).style.background=o[parseInt(1e3*Math.random()*(r%119))%o.length]}();const n=document.getElementById(1);i=n.style.background,a=[1],p=1,A(),h(),u=1}function h(){for(var e=1;e<=d;e++){var t=!1;document.getElementById(e).style.background==i&&0==v(e)&&(e>l&&v(e-l)||e+l<=d&&v(e+l)||e%l!=1&&v(e-1)||e%l!=0&&v(e+1))&&(t=!0),t&&a.push(e)}}function v(e){for(var t=0;t<a.length;t++)if(a[t]==e)return!0;return!1}function A(){document.getElementById("attemptsBar").innerText="Ход\n"+p+"/"+s}(function(){const e=document.createElement("div");e.id="window",e.position="absolute",e.style.width="900px",e.style.height="750px",e.style.background="url('images/back.jpg')",document.body.appendChild(e)})(),function(){const e=document.createElement("div");e.id="gameField",e.style.position="absolute",e.style.width="600px",e.style.height="600px",e.style.marginLeft="250px",e.style.marginTop="50px",e.style.background="black",e.style.display="block",e.onclick=y,e.style.fontSize=0,e.style.border="1px solid black";for(var t=0;t<d;t++){const n=document.createElement("div");n.id=t+1,n.style.display="inline-block",n.style.border="0px",n.style.margin="0",n.style.minWidth="40px",n.style.height="40px",n.style.background=o[parseInt(1e3*Math.random()*(r%119))%o.length],e.appendChild(n)}document.getElementById("window").appendChild(e);const n=document.getElementById(1);i=n.style.background,h()}(),function(){const e=document.createElement("div");e.id="infoField",e.style.position="absolute",e.style.marginTop="15%",e.style.height="auto",e.style.border="1px solid white",e.style.width="200px",e.style.fontSize="1em",e.style.fontFamily="Open Sans",e.style.color="white",e.style.marginLeft="10px",e.innerText="Цель игры - заполнить всё поле одним цветом, продвигаясь из левого верхнего угла. \nДля этого нужно выбирать прилегающий к занятой области цвет, кликая на него. \nКоличество ходов ограничено.",e.style.padding="5px",document.getElementById("window").appendChild(e)}(),function(){const e=document.createElement("div");e.id="attemptsBar",e.style.position="absolute",e.innerText="Ход\n"+p+"/"+s,e.style.marginTop="5%",e.style.marginLeft="50px",e.style.color="white",e.style.border="1px solid white",e.style.width="auto",e.style.padding="5px 20px",e.style.height="auto",e.style.textAlign="center",e.style.fontSize="2em",document.getElementById("window").appendChild(e)}()})()})();